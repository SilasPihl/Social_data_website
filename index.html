<!DOCTYPE HTML>
<html>
  <head>
    <title>Project B</title>
    <meta charset="utf-8" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1" /> -->

    <!-- <script src="https://d3js.org/d3.v4.js"></script> -->
    <script src="js/d3.v4.min.js"></script>
    <script src="js/lodash.min.js"></script>
    <script src="js/graph-scroll.js"></script>

    <script src="https://unpkg.com/d3-simple-slider@0.2.1/build/d3-simple-slider.js"></script>

    <!--jQuery CDN-->
    <script src="js/jquery-3.3.1.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->

    <!--Bootstrap-->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <link  href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->

    <link rel="stylesheet" type="text/css" href="style/main.css">

    <script type="text/javascript">
      function showHide(className, displayState) {
        var elements = document.getElementsByClassName(className);
        
        for (var i = 0; i < elements.length; i++){
            elements[i].style.display = displayState;
        }
      }

function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /*loop through a collection of all HTML elements:*/
  z = document.getElementsByTagName("*");
  for (i = 0; i < z.length; i++) {
    elmnt = z[i];
    /*search for elements with a certain atrribute:*/
    file = elmnt.getAttribute("w3-include-html");
    if (file) {
      /*make an HTTP request using the attribute value as the file name:*/
      xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
          if (this.status == 200) {elmnt.innerHTML = this.responseText;}
          if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
          /*remove the attribute, and call this function once more:*/
          elmnt.removeAttribute("w3-include-html");
          includeHTML();
        }
      }      
      xhttp.open("GET", file, true);
      xhttp.send();
      /*exit the function:*/
      return;
    }
  }
};      
    </script>
</head>
<body>
  <div class="row" style="margin-left:20px">
    <div class="col-2"></div>
    <div class="col-8">
      <div class="row">
        <h1 class="col-9 header">An insight into accidents in New York</h1>
        <div class="col-3">
            <div class="justify-content-center text-center explainer-content">
              <button class="btn btn-link" type="button" onclick="showHide('main-d3-content', 'block'); showHide('explainer-content', 'none');" >Show Main Project Page</button>
            </div>
            <div class="justify-content-center text-center main-d3-content">
              <button class="btn btn-link"   type="button" onclick="showHide('main-d3-content', 'none'); showHide('explainer-content', 'block');">Show Explainer book</button>
            </div>
        </div>
      </div>

      <hr class="line thick" />

      <h4 class="subtitle">Project B - 02806 Social Data Analysis and Visualizations F18 at DTU</h4>

      <div class="explainer-content">
        <div w3-include-html="explainer.html"></div> 
      </div>

      <p>
        New York City has been scored to be the third most congested city in the world by <a href="http://inrix.com/scorecard/">Inrix</a>. In fact it has become so bad that a new initiative, <a href="http://www1.nyc.gov/site/visionzero/index.page">Vision Zero</a>, was launched in 2014, with a goal of reducing annual traffic deaths by 50% by the year 2025. It has succeeded in reducing the total number of people killed anually in traffic. It is still not completely safe to be in traffic in New York. 
      </p>
      <p>
        But where is the least safe? And since it is so congested where are you most likely to have your new car dented?
      </p>
      <p>
        The data set from <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i">OpenNYC</a> has been used. It has been filtered to only include the years 2017 and 2018 and only include data that has a designated borough. The borough-less data accounts for roughly 33% of the original dataset.
      </p>
      <div class="justify-content-center text-center">
        <svg id="d3_factors" width="600" height="600" font-family="sans-serif" font-size="10" text-anchor="middle"></svg>
      </div>
      <p>
      </p>
      <p>
      </p>

    <hr>

    </div>  <!-- end of title, middle column -->
    <div class="col-2"></div>

  </div>  <!-- end of title panel row -->

  <div id="fixedcontainer">

    <div class="" id="fixedarea">
      <div class="row">
        <div class="col-10">
          <div class="text-center align-items-center">

            <div class="row">
              <div class="col-7 text-center align-items-center ">
                <h5>Timeseries of accidents</h5>
                <div class="row justify-content-md-center pt-1" >
                  
                  <div class="col std-button" >
                      Avg. over no. of days<br/>
                    <button type="button" class="btn-outline-primary btn btn-xs  std-button" id="reset_line_svg_slider"  onclick="reset_line_svg_slider();">Reset</button>
                    <button type="button" class="btn-outline-primary btn btn-xs  std-button" id="animate_button"  onclick="animate_time();">Animate</button>
                  </div>
                  <div class="col" id="line_svg_slider"></div>
                </div>  
                <!-- style="height: 40px;" -->
                <div id="d3_linechart"></div>

                <h5>Bar chart of accidents per hour</h5>
                <p class="chart_info">
                Move or clear the brush to change data showned in bar chart.
                <div class="text-center">
                  <div id="d3_bar"></div>
                </div>
              </div>
                
              <div class="col-5">
                <h5>Map of accidents at location</h5>
     
                <div class="text-center">
                  <div id="d3_map" ></div>
                </div> 
                <div>
                    <button type="button" data-toggle="button" 
                    class="active btn-outline-primary btn borough-button"
                    id="BrooklynBtn"
                    onclick="toggleBrooklyn();">Brooklyn</button>
                    <!--  <img src="suv.png" alt="" id ="carbutton" style="width:50px;height:50px;"></button>-->
                    <button type="button" data-toggle="button" 
                      class="active btn-outline-primary btn borough-button"
                      id="QueensBtn" 
                      onclick="toggleQueens();">
                    Queens</button>
                    <button type="button" data-toggle="button" 
                      class="active btn-outline-primary btn borough-button"
                      id="BronxBtn" 
                      onclick="toggleBronx();">
                    Bronx</button>

                    <button type="button" data-toggle="button" 
                      class="active btn-outline-primary btn borough-button"
                      id="StatenIslandBtn" 
                      onclick="toggleStatenIsland();">
                    Staten Island</button>
                    <button type="button" data-toggle="button" 
                      class="active btn-outline-primary btn borough-button"
                      id="ManhattanBtn" 
                      onclick="toggleManhattan();">
                    Manhattan</button>
                  </div>
              </div>      
            </div> <!-- end of 7-5 row -->

            <hr class="line" />
            <!-- <div>
              Data from: <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i">https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i</a>
            </div>  -->
          </div> 


        </div>
        <div class="col-2">
          <div class="right-skip" >
            <div class="btn-group btn-group-vertical">
              <button class="go-to-bottom btn btn-outline-primary">Bottom</button>
            </div>
          </div>
        </div>
      </div>
    </div>    <!-- end of fixedarea -->  
    <div id="steps" class="text-center">
      <div class="step ">
      </div>

      <div class="step ">
        <h1>Section 1</h1>
        <p>
          The southeastern part of Queens, which seems free from accidents, is bare because of JFK International Airport.
        </p>
      </div>
      <div class="step ">
        <h1>Section 2</h1>
        <p>
          The northwestern part of Staten Island is not completely free of accidents. However, due to our filtering of only using data which has a designated borough, this part is removed. This seems to indicate a systematic error in inputting data.
        </p>
      </div>
      <div class="step ">
        <h1>Section 3</h1>
        <p>
          Across the dataset we see peak accident hours are 14:00-15:00 and 16:00-18:00. This must mean that rush hour, when people are travelling home from work, is the most dangerous.
        </p>
      </div>
      <div class="step ">
        <h1>Section 4</h1>
        <p>
          We looked for a correlation between population density and the amount of accidents per inhabitant. Following this hypothesis we thought Manhattan would be the most dangerous. But we were unable to find any correlation. On the contrary, Queens with the second lowest density was the most dangerous and the Bronx, with the second highest density, was the most dangerous.
        </p>
      </div>
    </div>    <!-- end of steps -->
  </div><!-- end of fixedcontainer -->


  <div class="row" style="margin-left:20px">
    <div class="col-2"></div>
    <div class="col-8"></div>  <!-- end of title, middle column -->
    <div class="col-2"></div>
  </div>

  <script type="text/javascript" src="js/final_assignment.js"> </script>
  <!-- <script type="text/javascript" src="js/bubbles.js"> </script> -->

  <script type="text/javascript">
    showHide('main-d3-content', 'block'); 
    showHide('explainer-content', 'none');
    includeHTML();
  </script>

</body>
</html>
